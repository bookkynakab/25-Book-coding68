import tkinter as tk
from tkinter import ttk, messagebox
import random

class EggMasterProDance:
    def __init__(self, root):
        self.root = root
        self.root.title("Egg Master Pro: Dancing Chef Edition")
        self.root.geometry("480x750") # à¹€à¸žà¸´à¹ˆà¸¡à¸„à¸§à¸²à¸¡à¸ªà¸¹à¸‡à¹€à¸žà¸·à¹ˆà¸­à¸£à¸­à¸‡à¸£à¸±à¸šà¹€à¸Šà¸Ÿ
        self.root.configure(bg="#FFFDE7") 

        # à¸•à¸±à¸§à¹à¸›à¸£à¸„à¸§à¸šà¸„à¸¸à¸¡à¸à¸²à¸£à¸ˆà¸±à¸šà¹€à¸§à¸¥à¸²
        self.seconds_left = 0
        self.total_seconds = 0
        self.is_running = False
        self.after_id_timer = None
        self.after_id_dance = None # ID à¸ªà¸³à¸«à¸£à¸±à¸šà¸à¸²à¸£à¹€à¸•à¹‰à¸™

        # Animation Frames à¸ªà¸³à¸«à¸£à¸±à¸šà¹€à¸Šà¸Ÿà¹€à¸•à¹‰à¸™
        self.dance_frames = ["ðŸ‘¨â€ðŸ³", "ðŸ§‘â€ðŸ³", "ðŸ‘¨â€ðŸ³", "ðŸ§‘â€ðŸ³"] 
        self.current_dance_frame_idx = 0

        # à¸„à¸¥à¸±à¸‡à¸„à¸³à¹à¸™à¸°à¸™à¸³ (Tips)
        self.tips = [
            "à¹€à¸„à¸¥à¹‡à¸”à¸¥à¸±à¸š: à¹ƒà¸ªà¹ˆà¹€à¸à¸¥à¸·à¸­à¹€à¸¥à¹‡à¸à¸™à¹‰à¸­à¸¢à¹€à¸žà¸·à¹ˆà¸­à¹ƒà¸«à¹‰à¸›à¸­à¸à¹€à¸›à¸¥à¸·à¸­à¸à¸‡à¹ˆà¸²à¸¢à¸‚à¸¶à¹‰à¸™",
            "à¹€à¸„à¸¥à¹‡à¸”à¸¥à¸±à¸š: à¹ƒà¸Šà¹‰à¹„à¸‚à¹ˆà¸­à¸¸à¸“à¸«à¸ à¸¹à¸¡à¸´à¸«à¹‰à¸­à¸‡à¹€à¸žà¸·à¹ˆà¸­à¸›à¹‰à¸­à¸‡à¸à¸±à¸™à¹€à¸›à¸¥à¸·à¸­à¸à¹à¸•à¸",
            "à¹€à¸„à¸¥à¹‡à¸”à¸¥à¸±à¸š: à¸«à¸¥à¸±à¸‡à¸•à¹‰à¸¡à¹€à¸ªà¸£à¹‡à¸ˆ à¸„à¸§à¸£à¹à¸Šà¹ˆà¹ƒà¸™à¸™à¹‰à¸³à¹€à¸¢à¹‡à¸™à¸—à¸±à¸™à¸—à¸µ (Shock)",
            "à¹€à¸„à¸¥à¹‡à¸”à¸¥à¸±à¸š: à¹„à¸‚à¹ˆà¸ªà¸”à¸ˆà¸°à¸›à¸­à¸à¹€à¸›à¸¥à¸·à¸­à¸à¸¢à¸²à¸à¸à¸§à¹ˆà¸²à¹„à¸‚à¹ˆà¹€à¸à¹ˆà¸²à¹€à¸¥à¹‡à¸à¸™à¹‰à¸­à¸¢",
            "à¹€à¸„à¸¥à¹‡à¸”à¸¥à¸±à¸š: à¸–à¹‰à¸²à¸­à¸¢à¸²à¸à¹ƒà¸«à¹‰à¹„à¸‚à¹ˆà¹à¸”à¸‡à¸­à¸¢à¸¹à¹ˆà¸•à¸£à¸‡à¸à¸¥à¸²à¸‡ à¹ƒà¸«à¹‰à¸„à¸™à¹„à¸‚à¹ˆà¹€à¸šà¸²à¹† à¸Šà¹ˆà¸§à¸‡à¹à¸£à¸",
            "à¸£à¸¹à¹‰à¸«à¸£à¸·à¸­à¹„à¸¡à¹ˆ: à¹„à¸‚à¹ˆà¹€à¸›à¹‡à¸”à¹ƒà¸Šà¹‰à¹€à¸§à¸¥à¸²à¸•à¹‡à¸¡à¸™à¸²à¸™à¸à¸§à¹ˆà¸²à¹„à¸‚à¹ˆà¹„à¸à¹ˆà¸›à¸£à¸°à¸¡à¸²à¸“ 2 à¸™à¸²à¸—à¸µ",
            "à¸ªà¸¸à¸”à¸¢à¸­à¸”: à¹€à¸žà¸´à¹ˆà¸¡à¸™à¹‰à¸³à¸ªà¹‰à¸¡à¸ªà¸²à¸¢à¸Šà¸¹à¹€à¸¥à¹‡à¸à¸™à¹‰à¸­à¸¢ à¸ˆà¸°à¸Šà¹ˆà¸§à¸¢à¹ƒà¸«à¹‰à¹„à¸‚à¹ˆà¹„à¸¡à¹ˆà¹à¸•à¸!"
        ]

        self.setup_styles()
        self.create_widgets()

    def setup_styles(self):
        self.style = ttk.Style()
        self.style.theme_use('clam')
        self.style.configure("Warm.Horizontal.TProgressbar", 
                            troughcolor='#FFF9C4', 
                            background='#FF5722', 
                            thickness=20)

    def create_widgets(self):
        # Header Section
        self.header_label = tk.Label(self.root, text="ðŸ³ EGG MASTER PRO", 
                                   font=("Verdana", 24, "bold"), bg="#FFFDE7", fg="#E64A19")
        self.header_label.pack(pady=10)

        # Dancing Chef Area (à¹€à¸žà¸´à¹ˆà¸¡à¹€à¸‚à¹‰à¸²à¸¡à¸²à¹ƒà¸«à¸¡à¹ˆ)
        self.chef_dancer_label = tk.Label(self.root, text="ðŸ‘¨â€ðŸ³", 
                                          font=("Segoe UI Emoji", 60), bg="#FFFDE7")
        self.chef_dancer_label.pack(pady=5)

        # Visualizer Area (à¸•à¸±à¸§à¸à¸²à¸£à¹Œà¸•à¸¹à¸™à¹„à¸‚à¹ˆ)
        self.egg_display = tk.Label(self.root, text="ðŸ¥š", font=("Segoe UI Emoji", 80), 
                                   bg="#FFFDE7")
        self.egg_display.pack(pady=5)

        # Timer Display
        self.time_str = tk.StringVar(value="00:00")
        self.label_timer = tk.Label(self.root, textvariable=self.time_str, 
                                   font=("Courier New", 50, "bold"), bg="#FFFDE7", fg="#BF360C")
        self.label_timer.pack()

        # Progress Bar
        self.progress = ttk.Progressbar(self.root, orient="horizontal", length=350, 
                                        mode="determinate", style="Warm.Horizontal.TProgressbar")
        self.progress.pack(pady=15)

        # Menu Grid (à¸ˆà¸±à¸”à¸à¸¥à¸¸à¹ˆà¸¡à¸›à¸¸à¹ˆà¸¡)
        btn_frame = tk.Frame(self.root, bg="#FFFDE7")
        btn_frame.pack(pady=10)

        menus = [
            ("à¹„à¸‚à¹ˆà¸¥à¸§à¸", 2, "#FFECB3"), ("à¸¢à¸²à¸‡à¸¡à¸°à¸•à¸¹à¸¡", 7, "#FFE082"),
            ("à¹„à¸‚à¹ˆà¸•à¹‰à¸¡à¸ªà¸¸à¸", 10, "#FFD54F"), ("à¸ªà¸¸à¸à¸¡à¸²à¸", 12, "#FFCA28")
        ]

        r, c = 0, 0
        for name, mins, color in menus:
            btn = tk.Button(btn_frame, text=name, width=12, bg=color, relief="flat",
                           command=lambda m=mins, n=name: self.start_timer(m, n))
            btn.grid(row=r, column=c, padx=5, pady=5)
            c += 1
            if c > 1: r += 1; c = 0

        # Custom Input Section
        custom_frame = tk.Frame(self.root, bg="#FFFDE7")
        custom_frame.pack(pady=15)
        
        tk.Label(custom_frame, text="à¸à¸³à¸«à¸™à¸”à¹€à¸­à¸‡ (à¸™à¸²à¸—à¸µ):", bg="#FFFDE7").pack(side="left")
        self.custom_entry = tk.Entry(custom_frame, width=5, font=("Arial", 12))
        self.custom_entry.pack(side="left", padx=5)
        
        btn_go = tk.Button(custom_frame, text="à¹€à¸£à¸´à¹ˆà¸¡", bg="#FF5722", fg="white", 
                          command=self.start_custom)
        btn_go.pack(side="left")

        # Tips Section
        self.tip_label = tk.Label(self.root, text=random.choice(self.tips), 
                                 font=("Tahoma", 9, "italic"), wraplength=350,
                                 bg="#FFFDE7", fg="#795548")
        self.tip_label.pack(side="bottom", pady=20)

    def start_custom(self):
        try:
            val = float(self.custom_entry.get())
            if val > 0: self.start_timer(val, "à¹€à¸§à¸¥à¸²à¸—à¸µà¹ˆà¸„à¸¸à¸“à¸à¸³à¸«à¸™à¸”")
        except:
            messagebox.showerror("à¸œà¸´à¸”à¸žà¸¥à¸²à¸”", "à¸à¸£à¸¸à¸“à¸²à¹ƒà¸ªà¹ˆà¸•à¸±à¸§à¹€à¸¥à¸‚à¸—à¸µà¹ˆà¸–à¸¹à¸à¸•à¹‰à¸­à¸‡")

    def start_timer(self, minutes, name):
        # à¸¢à¸à¹€à¸¥à¸´à¸ timer à¹à¸¥à¸° animation à¹€à¸à¹ˆà¸²
        if self.after_id_timer: self.root.after_cancel(self.after_id_timer)
        if self.after_id_dance: self.root.after_cancel(self.after_id_dance)
        
        self.total_seconds = int(minutes * 60)
        self.seconds_left = self.total_seconds
        self.is_running = True
        self.chef_dancer_label.config(text="ðŸ‘¨â€ðŸ³") # à¸£à¸µà¹€à¸‹à¹‡à¸•à¹€à¸Šà¸Ÿ
        self.start_dance_animation() # à¹€à¸£à¸´à¹ˆà¸¡à¹€à¸•à¹‰à¸™
        self.update_ui(name)

    def update_ui(self, name):
        if self.seconds_left >= 0 and self.is_running:
            m, s = divmod(self.seconds_left, 60)
            self.time_str.set(f"{m:02d}:{s:02d}")
            
            p = ((self.total_seconds - self.seconds_left) / self.total_seconds) * 100
            self.progress['value'] = p
            
            if p < 10: self.egg_display.config(text="ðŸ¥š")
            elif p < 40: self.egg_display.config(text="ðŸ’§")
            elif p < 80: self.egg_display.config(text="â™¨ï¸")
            else: self.egg_display.config(text="ðŸ”¥")

            if self.seconds_left % 15 == 0:
                self.tip_label.config(text=random.choice(self.tips))

            self.seconds_left -= 1
            self.after_id_timer = self.root.after(1000, lambda: self.update_ui(name))
        elif self.seconds_left < 0:
            self.finish_timer()

    def start_dance_animation(self):
        if self.is_running: # à¹€à¸•à¹‰à¸™à¹€à¸‰à¸žà¸²à¸°à¸•à¸­à¸™à¸—à¸µà¹ˆà¸ˆà¸±à¸šà¹€à¸§à¸¥à¸²à¸­à¸¢à¸¹à¹ˆ
            self.chef_dancer_label.config(text=self.dance_frames[self.current_dance_frame_idx])
            self.current_dance_frame_idx = (self.current_dance_frame_idx + 1) % len(self.dance_frames)
            self.after_id_dance = self.root.after(250, self.start_dance_animation) # à¹€à¸•à¹‰à¸™à¸—à¸¸à¸ 250ms

    def finish_timer(self):
        self.is_running = False
        if self.after_id_dance: self.root.after_cancel(self.after_id_dance) # à¸«à¸¢à¸¸à¸”à¹€à¸•à¹‰à¸™
        self.chef_dancer_label.config(text="ðŸŽ‰") # à¹€à¸Šà¸Ÿà¸”à¸µà¹ƒà¸ˆ
        self.egg_display.config(text="âœ¨ðŸ³âœ¨")
        self.root.bell() 
        messagebox.showinfo("Egg Master", "ðŸ”” à¸à¸£à¸´à¹Šà¸‡à¸‡à¸‡! à¹„à¸‚à¹ˆà¸•à¹‰à¸¡à¸‚à¸­à¸‡à¸„à¸¸à¸“à¸žà¸£à¹‰à¸­à¸¡à¸£à¸±à¸šà¸›à¸£à¸°à¸—à¸²à¸™à¹à¸¥à¹‰à¸§!")
        self.tip_label.config(text="à¸—à¸²à¸™à¹ƒà¸«à¹‰à¸­à¸£à¹ˆà¸­à¸¢à¸™à¸°!")

if __name__ == "__main__":
    root = tk.Tk()
    app = EggMasterProDance(root)
    root.mainloop()
